

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>simsopt.solve package &mdash; simsopt 0.0.3 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/equation_numbers.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="simsopt.util package" href="simsopt.util.html" />
    <link rel="prev" title="simsopt.mhd package" href="simsopt.mhd.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> simsopt
          

          
            
            <img src="_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#installation">Installation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="problems.html">Defining optimization problems</a><ul>
<li class="toctree-l2"><a class="reference internal" href="problems.html#optimizable-objects">Optimizable objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="problems.html#specifying-functions-that-go-into-the-objective-function">Specifying functions that go into the objective function</a></li>
<li class="toctree-l2"><a class="reference internal" href="problems.html#degrees-of-freedom-dofs">Degrees of freedom (“dofs”)</a></li>
<li class="toctree-l2"><a class="reference internal" href="problems.html#helpful-functions">Helpful functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="problems.html#fixing-degrees-of-freedom">Fixing degrees of freedom</a></li>
<li class="toctree-l2"><a class="reference internal" href="problems.html#dependencies">Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="problems.html#derivatives">Derivatives</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">Testing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="testing.html#python-test-suite">Python test suite</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html#longer-examples">Longer examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html#continuous-integration">Continuous integration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="source.html">Source code on GitHub</a></li>
</ul>
<p class="caption"><span class="caption-text">API</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="simsopt.html">simsopt package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="simsopt.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="simsopt.core.html">simsopt.core package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="simsopt.core.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="simsopt.core.html#module-simsopt.core.dofs">simsopt.core.dofs module</a></li>
<li class="toctree-l4"><a class="reference internal" href="simsopt.core.html#module-simsopt.core.functions">simsopt.core.functions module</a></li>
<li class="toctree-l4"><a class="reference internal" href="simsopt.core.html#module-simsopt.core.least_squares_problem">simsopt.core.least_squares_problem module</a></li>
<li class="toctree-l4"><a class="reference internal" href="simsopt.core.html#module-simsopt.core.optimizable">simsopt.core.optimizable module</a></li>
<li class="toctree-l4"><a class="reference internal" href="simsopt.core.html#module-simsopt.core.surface">simsopt.core.surface module</a></li>
<li class="toctree-l4"><a class="reference internal" href="simsopt.core.html#module-simsopt.core.util">simsopt.core.util module</a></li>
<li class="toctree-l4"><a class="reference internal" href="simsopt.core.html#module-simsopt.core">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="simsopt.geo.html">simsopt.geo package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="simsopt.geo.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="simsopt.geo.html#module-simsopt.geo.biotsavart">simsopt.geo.biotsavart module</a></li>
<li class="toctree-l4"><a class="reference internal" href="simsopt.geo.html#module-simsopt.geo.config">simsopt.geo.config module</a></li>
<li class="toctree-l4"><a class="reference internal" href="simsopt.geo.html#module-simsopt.geo.curve">simsopt.geo.curve module</a></li>
<li class="toctree-l4"><a class="reference internal" href="simsopt.geo.html#module-simsopt.geo.fouriercurve">simsopt.geo.fouriercurve module</a></li>
<li class="toctree-l4"><a class="reference internal" href="simsopt.geo.html#module-simsopt.geo.jit">simsopt.geo.jit module</a></li>
<li class="toctree-l4"><a class="reference internal" href="simsopt.geo.html#module-simsopt.geo.magneticaxis">simsopt.geo.magneticaxis module</a></li>
<li class="toctree-l4"><a class="reference internal" href="simsopt.geo.html#module-simsopt.geo.objectives">simsopt.geo.objectives module</a></li>
<li class="toctree-l4"><a class="reference internal" href="simsopt.geo.html#simsopt-geo-parameterfreecurve-module">simsopt.geo.parameterfreecurve module</a></li>
<li class="toctree-l4"><a class="reference internal" href="simsopt.geo.html#module-simsopt.geo">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="simsopt.mhd.html">simsopt.mhd package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="simsopt.mhd.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="simsopt.mhd.html#module-simsopt.mhd.boozer">simsopt.mhd.boozer module</a></li>
<li class="toctree-l4"><a class="reference internal" href="simsopt.mhd.html#module-simsopt.mhd.spec">simsopt.mhd.spec module</a></li>
<li class="toctree-l4"><a class="reference internal" href="simsopt.mhd.html#module-simsopt.mhd.vmec">simsopt.mhd.vmec module</a></li>
<li class="toctree-l4"><a class="reference internal" href="simsopt.mhd.html#module-simsopt.mhd">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">simsopt.solve package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-simsopt.solve.mpi_solve">simsopt.solve.mpi_solve module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-simsopt.solve.serial_solve">simsopt.solve.serial_solve module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-simsopt.solve">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="simsopt.util.html">simsopt.util package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="simsopt.util.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="simsopt.util.html#module-simsopt.util.mpi">simsopt.util.mpi module</a></li>
<li class="toctree-l4"><a class="reference internal" href="simsopt.util.html#module-simsopt.util">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="simsopt.html#module-simsopt">Module contents</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">simsopt</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="simsopt.html">simsopt package</a> &raquo;</li>
        
      <li>simsopt.solve package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/simsopt.solve.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="simsopt-solve-package">
<h1>simsopt.solve package<a class="headerlink" href="#simsopt-solve-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-simsopt.solve.mpi_solve">
<span id="simsopt-solve-mpi-solve-module"></span><h2>simsopt.solve.mpi_solve module<a class="headerlink" href="#module-simsopt.solve.mpi_solve" title="Permalink to this headline">¶</a></h2>
<p>This module provides two main functions, fd_jac_mpi and
least_squares_mpi_solve. Also included are some functions that help in
the operation of these main functions.</p>
<dl class="py function">
<dt id="simsopt.solve.mpi_solve.fd_jac_mpi">
<code class="sig-prename descclassname"><span class="pre">simsopt.solve.mpi_solve.</span></code><code class="sig-name descname"><span class="pre">fd_jac_mpi</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dofs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mpi</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-07</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">centered</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simsopt.solve.mpi_solve.fd_jac_mpi" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the finite-difference Jacobian of the functions in dofs
with respect to all non-fixed degrees of freedom. Parallel
function evaluations will be used.</p>
<p>If the argument x is not supplied, the Jacobian will be
evaluated for the present state vector. If x is supplied, then
first get_dofs() will be called for each object to set the
global state vector to x.</p>
<p>The mpi argument should be an MpiPartition.</p>
<p>There are 2 ways to call this function. In method 1, all procs
(including workers) call this function (so mpi.is_apart is
False). In this case, the worker loop will be started
automatically. In method 2, the worker loop has already been
started before this function is called, as would be the case
in least_squares_mpi_solve(). Then only the group leaders
call this function.</p>
<p>This function returns a 3-tuple. The first entry is the
Jacobian. The second entry is a matrix, the columns of which give
all the values of x at which the functions were evaluated. The
third entry is a matrix, the colums of which give the
corresponding values of the functions.</p>
</dd></dl>

<dl class="py function">
<dt id="simsopt.solve.mpi_solve.least_squares_mpi_solve">
<code class="sig-prename descclassname"><span class="pre">simsopt.solve.mpi_solve.</span></code><code class="sig-name descname"><span class="pre">least_squares_mpi_solve</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prob</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mpi</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grad</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simsopt.solve.mpi_solve.least_squares_mpi_solve" title="Permalink to this definition">¶</a></dt>
<dd><p>Solve a nonlinear-least-squares minimization problem using
MPI. All MPI processes (including group leaders and workers)
should call this function.</p>
<p>prob should be an instance of LeastSquaresProblem.</p>
<p>mpi should be an instance of MpiPartition.</p>
<p>kwargs allows you to pass any arguments to scipy.optimize.minimize.</p>
</dd></dl>

<dl class="py function">
<dt id="simsopt.solve.mpi_solve.mpi_leaders_task">
<code class="sig-prename descclassname"><span class="pre">simsopt.solve.mpi_solve.</span></code><code class="sig-name descname"><span class="pre">mpi_leaders_task</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mpi</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dofs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simsopt.solve.mpi_solve.mpi_leaders_task" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is called by group leaders when
MpiPartition.leaders_loop() receives a signal to do something.</p>
<p>We have to take a “data” argument, but there is only 1 task we
would do, so we don’t use it.</p>
</dd></dl>

<dl class="py function">
<dt id="simsopt.solve.mpi_solve.mpi_workers_task">
<code class="sig-prename descclassname"><span class="pre">simsopt.solve.mpi_solve.</span></code><code class="sig-name descname"><span class="pre">mpi_workers_task</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mpi</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dofs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simsopt.solve.mpi_solve.mpi_workers_task" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is called by worker processes when
MpiPartition.workers_loop() receives a signal to do something.</p>
</dd></dl>

</div>
<div class="section" id="module-simsopt.solve.serial_solve">
<span id="simsopt-solve-serial-solve-module"></span><h2>simsopt.solve.serial_solve module<a class="headerlink" href="#module-simsopt.solve.serial_solve" title="Permalink to this headline">¶</a></h2>
<p>This module provides the least_squares_serial_solve
function. Eventually I can also put a serial_solve function here for
general optimization problems.</p>
<dl class="py function">
<dt id="simsopt.solve.serial_solve.least_squares_serial_solve">
<code class="sig-prename descclassname"><span class="pre">simsopt.solve.serial_solve.</span></code><code class="sig-name descname"><span class="pre">least_squares_serial_solve</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prob</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grad</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simsopt.solve.serial_solve.least_squares_serial_solve" title="Permalink to this definition">¶</a></dt>
<dd><p>Solve a nonlinear-least-squares minimization problem using
scipy.optimize, and without using any parallelization.</p>
<p>prob should be a LeastSquaresProblem object.</p>
<p>kwargs allows you to pass any arguments to scipy.optimize.least_squares.</p>
</dd></dl>

<dl class="py function">
<dt id="simsopt.solve.serial_solve.serial_solve">
<code class="sig-prename descclassname"><span class="pre">simsopt.solve.serial_solve.</span></code><code class="sig-name descname"><span class="pre">serial_solve</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prob</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grad</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simsopt.solve.serial_solve.serial_solve" title="Permalink to this definition">¶</a></dt>
<dd><p>Solve a general minimization problem (i.e. one that need not be of
least-squares form) using scipy.optimize.minimize, and without using any
parallelization.</p>
<p>prob should be a simsopt problem.</p>
<p>kwargs allows you to pass any arguments to scipy.optimize.minimize.</p>
</dd></dl>

</div>
<div class="section" id="module-simsopt.solve">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-simsopt.solve" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="simsopt.util.html" class="btn btn-neutral float-right" title="simsopt.util package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="simsopt.mhd.html" class="btn btn-neutral float-left" title="simsopt.mhd package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Simsopt Development Team.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>